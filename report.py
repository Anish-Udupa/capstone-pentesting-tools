import pdfkit

class Report:
    def __init__(self):
        self.file = open("./report/report.html", "w")
        self.opening_string = "<html>\n<head>\n<Link rel='stylesheet' href='report.css' />\n</head>\n<body>\n"
        self.closing_string = "</body>\n</html>"
        self.file.write(self.opening_string)


    def save(self):
        self.file.write(self.closing_string)
        self.file.close()
        pdfkit.from_file("./report/report.html", "./report/report.pdf", options={"enable-local-file-access": True})
    
    def write_tool_output(self, tool_name, tool_output, tool_feature_output=""):
        self.file.write(f"<h2>{tool_name}</h2>\n")
        replaced_tool_output = tool_output.replace("\n", "<br />\n")
        self.file.write(f"<p>{replaced_tool_output}</p>\n")
        self.file.write(f"<br />")
        self.file.write(f"<p>{tool_feature_output}</p>")
