# This file contains all utility functions
import subprocess


def run_command(cmd):
        print("The command given:", cmd)
        result = {
            "status": None,
            "output": None,
            "error": None,
            "return_code": None,
        }
        try:
            # result = subprocess.run(cmd.split(), check=True, shell=True, capture_output=True, text=True)
            cmd_result = subprocess.run(cmd, check=False, capture_output=True, text=True, shell=True)
            result["status"] = 1
            result["output"] = cmd_result.stdout
            result["error"] =cmd_result.stderr
            result["return_code"] = cmd_result.returncode
        except Exception as e:
            print(f"Failed to run command {cmd}.\nException: {e}")
            result["status"] = 0
            result["error"] = f"Failed to run command {cmd}.\nException: {e}"
            result["return_code"] = -1
        return result