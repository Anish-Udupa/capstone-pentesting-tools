import React from 'react';
import { useLocation, useNavigate} from 'react-router-dom';
import PropagateLoader from 'react-spinners/PropagateLoader';
import axios from 'axios';
import './Loading.css'; // Import a CSS file for styling
import { Link } from 'react-router-dom';
function Loading() {
  const location = useLocation();
  const { inputText,selectedOption } = location.state || {};
  const navigate = useNavigate();
  const fetchData = async () => {
    try {

      const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/submit`, { ip: inputText,algorithm: selectedOption });
      const data = response.data;
      console.log(data);
      navigate('/report',{state:{tools: data.tools}});
    } catch (error) {
      console.error(error);
    }
  };
  fetchData();
  return (
    <div className="loading-container">
      <p className="primary-heading">Processing your request for {inputText}</p>
      <div className="loading-spinner">
        <PropagateLoader
          size={25}
          aria-label="Processing your request"
          loading={true}
          color="#fe9e0d"
        />
      </div>
      {/* <Link to="/report">  <button  className="custom-input" style={{'width':'100px','color':'black','marginLeft':'600px','marginTop':'70px'}}>NEXT</button>
        </Link> */}
    </div>
  );
}

export default Loading;
